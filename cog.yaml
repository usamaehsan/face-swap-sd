build:
  gpu: true
  system_packages:
    - "python3-opencv"
    - cmake
    - zip
    - ffmpeg
    - libsm6 
    - libxext6
  cuda: "11.6"
  python_version: "3.9"
  python_packages:
    - "torchvision==0.16.2"
    - "diffusers"
    - "peft"
    - "torch==2.0.0"
    - "opencv-contrib-python-headless==4.6.0.66"
    - "controlnet-aux==0.0.3"
    - "transformers"
    - "accelerate"
    - "triton"
    - "compel"
    - "gfpgan"
  run:
    - "mkdir -p /root/.insightface/models/buffalo_l/"
    - "wget https://github.com/deepinsight/insightface/releases/download/v0.7/buffalo_l.zip"
    - "unzip buffalo_l.zip -d /root/.insightface/models/buffalo_l"

predict: "predict.py:Predictor"
